# E2E Testing Guide - Apartment Auditor

## üöÄ –û–±–∑–æ—Ä

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è Apartment Auditor —Å –ø–æ–º–æ—â—å—é Detox.

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **ESM —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –≤ `.cjs`:
   - `metro.config.js` ‚Üí `metro.config.cjs`
   - `detox.config.js` ‚Üí `detox.config.cjs`
   - `jest.config.js` ‚Üí `jest.config.cjs`

2. **E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ E2E —Ç–µ—Å—Ç–æ–≤:
   - –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `e2e/`
   - –°–æ–∑–¥–∞–Ω—ã 9 E2E —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω Detox —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π iOS –∏ Android

3. **TypeScript –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ö–µ–ª–ø–µ—Ä–∞—Ö
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –º–æ–∫–æ–≤
   - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `jest-extended` –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç—á–µ—Ä–æ–≤

## üß™ E2E –¢–µ—Å—Ç—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:

1. **`01-project-creation.e2e.ts`** - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
2. **`02-navigation.e2e.ts`** - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤—Å–µ–º —ç–∫—Ä–∞–Ω–∞–º
3. **`03-mode-switching.e2e.ts`** - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ (—á–µ—Ä–Ω–æ–≤–∞—è/—á–∏—Å—Ç–æ–≤–∞—è)
4. **`04-photo-management.e2e.ts`** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
5. **`05-status-management.e2e.ts`** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —á–µ–∫–ø–æ–∏–Ω—Ç–æ–≤
6. **`06-category-progress.e2e.ts`** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
7. **`07-room-selection.e2e.ts`** - –í—ã–±–æ—Ä –ø–æ–º–µ—â–µ–Ω–∏–π
8. **`08-data-persistence.e2e.ts`** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
9. **`09-inspection-completion.e2e.ts`** - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–Ω—Å–ø–µ–∫—Ü–∏–∏
10. **`config.e2e.ts`** - –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üîß –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1. **VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** (–¥–ª—è –†–æ—Å—Å–∏–∏):
   ```bash
   # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ --tunnel —Ñ–ª–∞–≥
   npx expo start --tunnel
   ```

2. **Detox CLI**:
   ```bash
   npm install -g detox-cli
   ```

3. **–°–∏–º—É–ª—è—Ç–æ—Ä—ã/–≠–º—É–ª—è—Ç–æ—Ä—ã**:
   - **iOS**: Xcode —Å iPhone 15 —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º
   - **Android**: Android Studio —Å Pixel 4 API 31 AVD

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
cd apartment-app

# –ó–∞–ø—É—Å–∫ Metro bundler —Å VPN —Ç—É–Ω–Ω–µ–ª–µ–º
npx expo start --tunnel --port 8082
```

### –ó–∞–ø—É—Å–∫ E2E —Ç–µ—Å—Ç–æ–≤:

```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
npm run detox:build

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ iOS
npm run test:e2e -- --configuration ios.sim.debug

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ Android
npm run test:e2e -- --configuration android.emu.debug
```

### –î—Ä—É–≥–∏–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# Unit —Ç–µ—Å—Ç—ã
npm test

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
npm run test:integration

# TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run type-check

# Smoke —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
npm run smoke-test
```

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –û—à–∏–±–∫–∞ "Port 8081 is in use"
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
npx expo start --tunnel --port 8082
```

### 2. VPN –±–ª–æ–∫–∏—Ä—É–µ—Ç LAN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```bash
# –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ --tunnel —Ñ–ª–∞–≥
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
npx expo start
npx expo start --lan

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
npx expo start --tunnel
```

### 3. Metro –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç .cjs —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
# metro.config.cjs
# detox.config.cjs
# jest.config.cjs
```

### 4. TypeScript –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
```bash
# –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã jest-extended –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç—á–µ—Ä–æ–≤
# –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
```

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç:
- Metro bundler —Å ESM —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é
- Detox –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ E2E —Ç–µ—Å—Ç–æ–≤
- Smoke —Ç–µ—Å—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ TypeScript –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–∞—Ö (~115 –æ—à–∏–±–æ–∫)
- –í–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ã –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é
- E2E —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–≤

### üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –û–±–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã –¥–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –≤–µ—Ä—Å–∏–π:
   - expo@~54.0.30
   - expo-router@~6.0.21
   - @types/react@~19.1.10

2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å iOS/Android —Å–∏–º—É–ª—è—Ç–æ—Ä—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º E2E —Ç–µ—Å—Ç–æ–≤

3. –î–ª—è CI/CD –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GitHub Actions —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∏–∑ `.github/workflows/`

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å TypeScript –æ—à–∏–±–∫–∏** –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–º—É–ª—è—Ç–æ—Ä—ã** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ E2E —Ç–µ—Å—Ç–æ–≤
3. **–û–±–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã** –¥–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –≤–µ—Ä—Å–∏–π
4. **–†–∞—Å—à–∏—Ä–∏—Ç—å E2E –ø–æ–∫—Ä—ã—Ç–∏–µ** –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏
5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ Production-ready –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-12-19
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**: Claude Code